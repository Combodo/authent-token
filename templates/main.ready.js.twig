
{% if null != Params.personaltoken %}
{% set Infos = Params.personaltoken %}

$('.token-refresh-button').on('click', function(){
	var button = $(this);
	var token_id = $(this).attr('data-token-id');

	$(button).prop('disabled', true);

	var refresh_url = '{{Params.refresh_token_url|raw}}&token_id=' + token_id;
	$.ajax({
			type: "POST",
			url: refresh_url
			//data: formData,
			//processData: false,
			//contentType: false
		})
		.done(function (data) {
			$(button).prop('disabled', false);
			if (data.result == 'ok')
			{
				var refresh_alert = $('#refresh_token_alert');
				refresh_alert.find('.ibo-alert--body').html(data.message);
				refresh_alert.removeClass('ibo-is-hidden');
			}
			else
			{
				alert('KO');
			}
		})
		.fail(function (data) {
			$(button).prop('disabled', false);
		});
});

{% endif %}
